<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS基础 | @luminous/docs</title>
    <meta name="description" content="基于 vitepress 实现">
    <link rel="preload stylesheet" href="/my-blog/assets/style.c528e86e.css" as="style">
    <script type="module" src="/my-blog/assets/app.de403638.js"></script>
    <link rel="preload" href="/my-blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/my-blog/assets/chunks/framework.a7041386.js">
  <link rel="modulepreload" href="/my-blog/assets/chunks/theme.e5c20b03.js">
  <link rel="modulepreload" href="/my-blog/assets/JS_JS02.md.6346f4ef.lean.js">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body><!--v-if--><!--teleport anchor-->
    <div id="app"><div class="Layout" data-v-0da2a2cb data-v-2560bc03><!--[--><!----><!--[--><div class="theme-blog-popover" style="display:none;" data-pagefind-ignore="all" data-v-9c336805><div class="header" data-v-9c336805><div class="title-wrapper" data-v-9c336805><i class="el-icon" style="font-size:20px;" data-v-9c336805><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" data-v-9c336805><path fill="currentColor" d="M288 128h608L736 384l160 256H288v320h-96V64h96v64z"></path></svg><!--]--></i><span class="title" data-v-9c336805></span></div><i class="el-icon close-icon" style="font-size:20px;" data-v-9c336805><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" data-v-9c336805><path fill="currentColor" d="M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"></path></svg><!--]--></i></div><!----><div class="footer content" data-v-9c336805><!--[--><!--]--></div></div><div class="theme-blog-popover-close" style="display:none;" data-v-9c336805><i class="el-icon" style="font-size:20px;" data-v-9c336805><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" data-v-9c336805><path fill="currentColor" d="M288 128h608L736 384l160 256H288v320h-96V64h96v64z"></path></svg><!--]--></i></div><!--]--><!--]--><!--[--><span tabindex="-1" data-v-aa2fbcc0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-aa2fbcc0> Skip to content </a><!--]--><!----><header class="VPNav" data-v-2560bc03 data-v-eb271c3d><div class="VPNavBar has-sidebar" data-v-eb271c3d data-v-47863838><div class="container" data-v-47863838><div class="title" data-v-47863838><div class="VPNavBarTitle has-sidebar" data-v-47863838 data-v-b44537a1><a class="title" href="/my-blog/" data-v-b44537a1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/my-blog/logo.png" alt data-v-db8c3c1e><!--]--><!--[-->@luminous/docs<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-47863838><div class="curtain" data-v-47863838></div><div class="content-body" data-v-47863838><!--[--><!--[--><!--[--><div class="blog-search" data-pagefind-ignore="all" data-v-0da2a2cb style="--774f5a87:1;" data-v-41ddad83><div class="nav-search-btn-wait" data-v-41ddad83><svg width="14" height="14" viewBox="0 0 20 20" data-v-41ddad83><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" data-v-41ddad83></path></svg><span class="search-tip" data-v-41ddad83>搜索</span><span class="metaKey" data-v-41ddad83> K </span></div><!--teleport start--><!--teleport end--></div><!--]--><!--]--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-47863838><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-47863838 data-v-c0bafe63><span id="main-nav-aria-label" class="visually-hidden" data-v-c0bafe63>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-blog/" tabindex="0" data-v-c0bafe63 data-v-81e9440d><!--[-->首页<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-blog/sop/introduce.html" tabindex="0" data-v-c0bafe63 data-v-81e9440d><!--[-->关于我<!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-47863838 data-v-3a33ae6c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-3a33ae6c data-v-c800e9bf data-v-6cf3aa60><span class="check" data-v-6cf3aa60><span class="icon" data-v-6cf3aa60><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-c800e9bf><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-c800e9bf><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-47863838 data-v-97b026da data-v-5773fe44><!--[--><a class="VPSocialLink" href="https://github.com/jiacheng-coder" aria-label="github" target="_blank" rel="noopener" data-v-5773fe44 data-v-bda1ebd9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-47863838 data-v-7e48b6b8 data-v-190b3c79><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-190b3c79><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-190b3c79><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-190b3c79><div class="VPMenu" data-v-190b3c79 data-v-05f637ea><!----><!--[--><!--[--><!----><div class="group" data-v-7e48b6b8><div class="item appearance" data-v-7e48b6b8><p class="label" data-v-7e48b6b8>Appearance</p><div class="appearance-action" data-v-7e48b6b8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-7e48b6b8 data-v-c800e9bf data-v-6cf3aa60><span class="check" data-v-6cf3aa60><span class="icon" data-v-6cf3aa60><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-c800e9bf><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-c800e9bf><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-7e48b6b8><div class="item social-links" data-v-7e48b6b8><div class="VPSocialLinks social-links-list" data-v-7e48b6b8 data-v-5773fe44><!--[--><a class="VPSocialLink" href="https://github.com/jiacheng-coder" aria-label="github" target="_blank" rel="noopener" data-v-5773fe44 data-v-bda1ebd9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-47863838 data-v-c9cd37cf><span class="container" data-v-c9cd37cf><span class="top" data-v-c9cd37cf></span><span class="middle" data-v-c9cd37cf></span><span class="bottom" data-v-c9cd37cf></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-2560bc03 data-v-d68ad0de><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d68ad0de><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-d68ad0de><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-d68ad0de>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-d68ad0de data-v-6384b7b5><button data-v-6384b7b5>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-2560bc03 data-v-1a24e3a8><div class="curtain" data-v-1a24e3a8></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-1a24e3a8><span class="visually-hidden" id="sidebar-aria-label" data-v-1a24e3a8> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-1a24e3a8><div class="VPSidebarItem level-0" data-v-1a24e3a8 data-v-1cbae177><!----><!----></div></div><!--]--><!--[--><!--[--><div class="sidebar" data-pagefind-ignore="all" data-v-0da2a2cb data-v-a3f15914><div class="card recommend" data-pagefind-ignore="all" data-v-a3f15914 data-v-71d9b576><div class="card-header" data-v-71d9b576><span class="title" data-v-71d9b576>🔍 相关文章</span><!----></div><ol class="recommend-container" data-v-71d9b576><!--[--><li data-v-71d9b576><i class="num" data-v-71d9b576>1</i><div class="des" data-v-71d9b576><a class="el-link el-link--info is-underline title" href="/my-blog/JS/JS01" data-v-71d9b576><!--v-if--><span class="el-link__inner"><!--[-->JavaScript<!--]--></span><!--v-if--></a><div class="suffix" data-v-71d9b576><span class="tag" data-v-71d9b576>2023-07-17</span></div></div></li><li data-v-71d9b576><i class="num" data-v-71d9b576>2</i><div class="des" data-v-71d9b576><a class="el-link el-link--info is-underline title current" href="/my-blog/JS/JS02" data-v-71d9b576><!--v-if--><span class="el-link__inner"><!--[-->JS基础<!--]--></span><!--v-if--></a><div class="suffix" data-v-71d9b576><span class="tag" data-v-71d9b576>2023-07-17</span></div></div></li><li data-v-71d9b576><i class="num" data-v-71d9b576>3</i><div class="des" data-v-71d9b576><a class="el-link el-link--info is-underline title" href="/my-blog/JS/JS04" data-v-71d9b576><!--v-if--><span class="el-link__inner"><!--[-->Javascript进阶<!--]--></span><!--v-if--></a><div class="suffix" data-v-71d9b576><span class="tag" data-v-71d9b576>2023-07-17</span></div></div></li><li data-v-71d9b576><i class="num" data-v-71d9b576>4</i><div class="des" data-v-71d9b576><a class="el-link el-link--info is-underline title" href="/my-blog/JS/JS手写" data-v-71d9b576><!--v-if--><span class="el-link__inner"><!--[-->JS手写<!--]--></span><!--v-if--></a><div class="suffix" data-v-71d9b576><span class="tag" data-v-71d9b576>2023-07-17</span></div></div></li><!--]--></ol></div></div><!--]--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-pagefind-body data-v-2560bc03 data-v-5c2cf82f><div class="VPDoc has-sidebar has-aside" data-v-5c2cf82f data-v-7be6d394><!--[--><!--]--><div class="container" data-v-7be6d394><div class="aside" data-v-7be6d394><div class="aside-curtain" data-v-7be6d394></div><div class="aside-container" data-v-7be6d394><div class="aside-content" data-v-7be6d394><div class="VPDocAside" data-v-7be6d394 data-v-24267604><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-24267604 data-v-2e24fddd><div class="content" data-v-2e24fddd><div class="outline-marker" data-v-2e24fddd></div><div class="outline-title" data-v-2e24fddd>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2e24fddd><span class="visually-hidden" id="doc-outline-aria-label" data-v-2e24fddd> Table of Contents for current page </span><ul class="root" data-v-2e24fddd data-v-adca1247><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-24267604></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7be6d394><div class="content-container" data-v-7be6d394><!--[--><!--[--><!--[--><!----><!----><!--]--><!--]--><!--]--><!----><main class="main" data-v-7be6d394><div style="position:relative;" class="vp-doc _my-blog_JS_JS02" data-v-7be6d394><div><h1 id="js基础" tabindex="-1">JS基础 <a class="header-anchor" href="#js基础" aria-label="Permalink to &quot;JS基础&quot;">​</a></h1><h2 id="闭包与作用域链" tabindex="-1">闭包与作用域链 <a class="header-anchor" href="#闭包与作用域链" aria-label="Permalink to &quot;闭包与作用域链&quot;">​</a></h2><ul><li><p>闭包(闭包函数)的概念：指有权<strong>访问另一个函数作用域中的变量</strong>的函数，一般情况就是在一个函数中包含另一个函数。</p></li><li><p>闭包的实现原理：其实是利用了<strong>作用域链</strong>的特性，我们都知道作用域链就是在当前执行环境下访问某个变量时，如果不存在就一直向外层寻找，最终寻找到最外层也就是全局作用域，这样就形成了一个链条。<strong>当内部函数被返回或者赋值给其他变量时，它会保持对外部函数作用域中变量的引用</strong>，这样就形成了闭包。</p></li><li><p>闭包的作用：主要有以下几个方面：</p><ul><li>访问函数内部变量：通过闭包可以访问到外部函数中定义的局部变量或参数，这些变量对于其他函数来说是不可见的。</li><li>保持函数在环境中一直存在，不会被垃圾回收机制处理：通过闭包可以使得外部函数在执行完毕后仍然存在于内存中，因为有内部函数引用它。这样可以避免重复创建和销毁对象，提高性能。</li><li>实现私有属性和方法：通过闭包可以实现类似于面向对象编程中私有属性和方法的功能，即只能通过特定的接口访问或修改某些数据。</li></ul></li><li><p>示例</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">outer</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 外部函数的局部变量</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">inner</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 内部函数可以访问外部函数的局部变量</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">inner</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 外部函数返回内部函数</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> fn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">outer</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 调用外部函数，得到内部函数</span></span>
<span class="line"><span style="color:#82AAFF;">fn</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 调用内部函数，输出10</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>闭包的缺点主要有以下两个：</p><ul><li>闭包会使得函数中的变量都被保存在内存中，增大内存消耗，可能导致内存泄漏</li><li>闭包会影响处理速度，因为每次访问一个变量时，都需要从作用域链中查找</li></ul></li><li><p>如何避免闭包导致的内存泄露</p><ul><li><p>避免闭包造成内存泄漏的一个常用方法是，在<strong>退出函数</strong>之前，<strong>将不使用的局部变量赋值为null</strong>。这样可以断开闭包对外部变量的引用，让垃圾回收机制回收内存。</p></li><li><p>这里有一个代码示例，说明了闭包如何造成内存泄漏：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">$</span><span style="color:#A6ACCD;">(document)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ready</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">button</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">button-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">button</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onclick</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当指定单击事件处理程序时，就创建了一个在其封闭的环境中包含button变量的闭包。而且，现在的button也包含一个对闭包的引用。这样就形成了一个循环引用，导致内存无法被回收。</p></li></ul></li><li><p>闭包有什么常见的应用场景</p><ul><li><p>闭包的应用场景有很多，这里我简单介绍几个常见的：</p><ul><li>使用闭包代替全局变量，隐藏变量，避免全局污染。</li><li>函数外或在其他函数中访问某一函数内部的参数，实现数据的私有化。</li><li>在函数执行之前为要执行的函数提供具体参数，实现柯里化或偏应用。</li><li>在函数执行之前为函数提供只有在函数执行或引用时才能知道的具体参数，实现延迟计算或惰性加载。</li><li>在循环中创建闭包，防止取到意外的值。</li></ul><p>什么时候要使用闭包呢？一般来说，当你需要间接访问一个变量，或者需要保持一个变量在内存中不被销毁时，就可以考虑使用闭包。但是使用闭包也要注意可能造成的内存泄漏问题，所以不要滥用闭包。</p></li><li><p>示例</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> (</span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// data[0]();  // 3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// data[1]();  // 3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// data[2]();  // 3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// var定义全局变量,上述代码执行过程中会将三个函数存储进data数组</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 在调用时三个函数先在函数内部找变量i,没找到就会沿着作用域链找到全局定义的i,此时的i经过循环后已经变成了3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 闭包打印输出1,2,3</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">outter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">num</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">num</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">outter</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#82AAFF;">a</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#82AAFF;">a</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// 2</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">outter</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#82AAFF;">b</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// 1</span></span>
<span class="line"><span style="color:#82AAFF;">b</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// 2</span></span>
<span class="line"><span style="color:#82AAFF;">b</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li></ul></li></ul><h2 id="防抖和节流" tabindex="-1">防抖和节流 <a class="header-anchor" href="#防抖和节流" aria-label="Permalink to &quot;防抖和节流&quot;">​</a></h2><h3 id="是什么" tabindex="-1">是什么 <a class="header-anchor" href="#是什么" aria-label="Permalink to &quot;是什么&quot;">​</a></h3><p>本质上是优化高频率执行代码的一种手段</p><p>如：浏览器的 <code>resize</code>、<code>scroll</code>、<code>keypress</code>、<code>mousemove</code> 等事件在触发时，会不断地调用绑定在事件上的回调函数，极大地浪费资源，降低前端性能</p><p>为了优化体验，需要对这类事件进行调用次数的限制，对此我们就可以采用 <strong>防抖（debounce）</strong> 和 <strong>节流（throttle）</strong> 的方式来减少调用频率</p><ul><li>节流: n 秒内只运行一次，若在 n 秒内重复触发，只有一次生效</li><li>防抖: n 秒后在执行该事件，若在 n 秒内被重复触发，则重新计时</li></ul><p><strong>一个经典的比喻</strong>:</p><blockquote><p>想象每天上班大厦底下的电梯。把电梯完成一次运送，类比为一次函数的执行和响应</p><p>假设电梯有两种运行策略 <code>debounce</code> 和 <code>throttle</code>，超时设定为15秒，不考虑容量限制</p><p>电梯第一个人进来后，15秒后准时运送一次，这是节流</p><p>电梯第一个人进来后，等待15秒。如果过程中又有人进来，15秒等待重新计时，直到15秒后开始运送，这是防抖</p></blockquote><h3 id="区别" tabindex="-1">区别 <a class="header-anchor" href="#区别" aria-label="Permalink to &quot;区别&quot;">​</a></h3><ul><li>防抖是<strong>将多次执行变为最后一次执行</strong>，节流是将<strong>多次执行变为在规定时间内只执行一次</strong>。</li><li>防抖适合用于输入框搜索提示、短信验证码、提交表单等场景，节流适合用于滚动条滚动事件、鼠标移动事件、播放进度条等场景。</li><li>防抖的效果是：用户在不断输入内容时，不会发送请求，只有当用户停止输入时，才会发送请求。</li><li>节流的效果是：用户在不断输入内容时，每隔一段时间就会发送请求，但不会频繁发送请求。</li></ul><h3 id="应用场景" tabindex="-1">应用场景 <a class="header-anchor" href="#应用场景" aria-label="Permalink to &quot;应用场景&quot;">​</a></h3><ul><li><p>防抖</p><ul><li>用于输入框的搜索提示，避免用户每输入一个字母就发送请求。</li><li>用于窗口的大小改变事件，避免用户每调整一次窗口就触发回调。</li><li>用于按钮点击事件, 例如防止用户多次点击button重复发送登录请求</li></ul></li><li><p>节流</p><ul><li>用于滚动条的滚动事件，避免用户每滚动一像素就触发回调。</li><li>用于鼠标的移动事件，避免用户每移动一次鼠标就触发回调。</li></ul></li></ul><h3 id="代码示例" tabindex="-1">代码示例 <a class="header-anchor" href="#代码示例" aria-label="Permalink to &quot;代码示例&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 防抖：输入框搜索提示</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> input </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> timer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">input</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 发送请求</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">500</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 节流：滚动条滚动事件</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> scroll </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scroll</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> lastTime </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">scroll</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scroll</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nowTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">now</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">nowTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lastTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 执行回调</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">scroll</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollTop</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">lastTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">nowTime</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="数组扁平化" tabindex="-1">数组扁平化 <a class="header-anchor" href="#数组扁平化" aria-label="Permalink to &quot;数组扁平化&quot;">​</a></h2><blockquote><p>使用递归函数，遍历数组中的每个元素，如果是数组就继续递归调用，否则就将元素添加到一个新的数组中</p></blockquote><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> newArr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> []</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 用于存放转换后的数组</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">arrOfOneDimension</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">arr</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// for-of遍历可迭代对象</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">arrOfOneDimension</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//如果还是数组继续递归调用</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">newArr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newArr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>也可以用数组自带的flat方法实现:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> arr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">7</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a,b]cd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">arr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">flat</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">Infinity</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 返回 [1, 2, 3, 4, 5, &#39;7&#39;, &#39;a,b]cd&#39;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="多维数组去重" tabindex="-1">多维数组去重 <a class="header-anchor" href="#多维数组去重" aria-label="Permalink to &quot;多维数组去重&quot;">​</a></h2><p>JS如何实现多维数组去重，有多种方法，这里给你一个简单的例子，使用递归和indexOf方法</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 定义一个函数，用来判断一个元素是否在一个数组中</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">contains</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">arr</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果是一维数组，直接比较</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果是多维数组，递归调用</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">contains</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 定义一个函数，用来实现多维数组去重</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">unique</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">arr</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 存放结果的数组</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果当前元素不在结果数组中，就添加到结果数组中</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#82AAFF;">contains</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">])) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">push</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arr</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 测试代码</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> arr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">]]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">unique</span><span style="color:#A6ACCD;">(arr))</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// [[1,2,3],[2,3,4],[5,6,7]]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="cookie-sessionstorage-localstorage" tabindex="-1">Cookie, sessionStorage, localStorage <a class="header-anchor" href="#cookie-sessionstorage-localstorage" aria-label="Permalink to &quot;Cookie, sessionStorage, localStorage&quot;">​</a></h2><h2 id="手写promise-all和promise-race" tabindex="-1">手写promise.all和promise.race <a class="header-anchor" href="#手写promise-all和promise-race" aria-label="Permalink to &quot;手写promise.all和promise.race&quot;">​</a></h2><p>如何用js代码实现promise.all和promise.race。这两个方法都是用来将多个promise对象包装成一个新的promise对象，但是有不同的行为。</p><h3 id="all" tabindex="-1">all <a class="header-anchor" href="#all" aria-label="Permalink to &quot;all&quot;">​</a></h3><p>Promise.all()方法接收一个可迭代类型（Array，Map，Set）作为参数</p><p>它会等待<strong>所有的</strong>promise对象都成功（resolved）后才返回一个成功的promise对象，返回值是所有成功结果的数组。例如：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 假设有三个异步操作</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 使用Promise.all()方法</span></span>
<span class="line"><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([p1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 等到p3结束后执行 [ &#39;p1&#39;, &#39;p2&#39;, &#39;p3&#39; ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 不会执行, 因为没有错误</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>如果<strong>有任何一个</strong>promise对象<strong>失败</strong>（rejected），它<strong>会立即返回一个失败的promise</strong>对象，并抛出错误。例如：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 假设有三个异步操作</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> p3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 使用Promise.all()方法</span></span>
<span class="line"><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;">([p1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 不会执行，因为p3失败了</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 输出 &#39;p3&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="race" tabindex="-1">race <a class="header-anchor" href="#race" aria-label="Permalink to &quot;race&quot;">​</a></h3><p>Promise.race()方法也接收一个可迭代类型作为参数</p><p>它会返回一个新的promise对象，但是只要其中任何一个promise对象率先改变状态（无论成功resolve还是失败reject），它就会跟着改变状态，并返回那个<strong>率先</strong>改变状态的结果, 这就是所谓race的含义。例如：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 使用同样的三个异步操作</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 使用Promise.race()方法</span></span>
<span class="line"><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">race</span><span style="color:#A6ACCD;">([p1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> p3])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 输出 &#39;p1&#39;，因为p1最快成功了</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 不会执行，因为没有失败在前面</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="手撕promise-all" tabindex="-1">手撕promise.all <a class="header-anchor" href="#手撕promise-all" aria-label="Permalink to &quot;手撕promise.all&quot;">​</a></h3><p>简单来说，要实现类似promise.all的方法，需要做以下几件事¹²：</p><ul><li>接收一个可迭代类型作为参数，并返回一个新的promise对象</li><li>定义一个空数组用于存放每个promise对象的结果</li><li>遍历参数中的每个元素，如果是promise对象就调用它们的then方法，并将结果添加到数组中；如果不是就直接添加到数组中</li><li>如果所有元素都成功（resolved），就调用新promise对象的resolve方法，并传入结果数组；如果有任何元素失败（rejected），就调用新promise对象的reject方法，并传入错误信息</li></ul><p>例如：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 实现类似Promise.all()方法</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">promiseAll</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">iterable</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 参数必须是可迭代类型</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">iterator</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`${</span><span style="color:#A6ACCD;">iterable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> is not iterable</span><span style="color:#89DDFF;">`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 定义一个空数组用于存放结果</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 定义一个计数器用于记录成功次数</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 遍历参数中的每个元素</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 如果是promise对象就调用then方法</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// 将结果添加到数组中，并保持顺序</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// 计数器加一</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// 如果所有元素都成功，就返回成功状态和结果数组</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">reason</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// 如果有任何元素失败，就返回失败状态和错误信息</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reason</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 如果不是promise对象就直接添加到数组中，并保持顺序</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 计数器加一</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 如果所有元素都成功，就返回成功状态和结果数组</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">count</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="手撕promise-race" tabindex="-1">手撕promise.race <a class="header-anchor" href="#手撕promise-race" aria-label="Permalink to &quot;手撕promise.race&quot;">​</a></h3><p>简单来说，要实现类似promise.race的功能，需要做以下几件事¹²：</p><ul><li>接收一个可迭代类型作为参数，并返回一个新的promise对象</li><li>遍历参数中的每个元素，如果是promise对象就调用它们的then方法；如果不是就直接将其包装成一个立即成功（resolved）或失败（rejected） 的 promise 对象。</li><li>只要其中任何一个元素率先改变状态（无论成功还是失败），就调用新 promise 对象相应 的 resolve 或 reject 方法，并传入那个率先改变状态 的 结果</li></ul><p>例如：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 实现类似Promise.race()功能</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">promiseRace</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">iterable</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 参数必须是可迭代类型且不为空, 使用Symbol.iterator迭代器属性来判断</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">iterator</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`${</span><span style="color:#A6ACCD;">iterable</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> is not iterable</span><span style="color:#89DDFF;">`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 遍历参数中的每个元素</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">item</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">iterable</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 如果是 promise 对象 就 调 用 then 方法</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">item</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">reject</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 如果 不 是 promise 对象 就 直接将其包装成一个立即成功或失败 的 promise 对象</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-7be6d394 data-v-ef8fce8e><!--[--><!--]--><div class="edit-info" data-v-ef8fce8e><!----><div class="last-updated" data-v-ef8fce8e><p class="VPLastUpdated" data-v-ef8fce8e data-v-5f8c674a>上次更新于: <time datetime="2023-07-17T13:56:58.000Z" data-v-5f8c674a></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-2560bc03 data-v-9257c7a2><div class="container" data-v-9257c7a2><p class="message" data-v-9257c7a2>每天前进 30 公里</p><p class="copyright" data-v-9257c7a2>MIT Licensed | <a target="_blank" href="https://github.com/jiacheng-coder/my-blog"> @luminous/docs </a></p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"algo_02.双指针.md\":\"7f81d5b0\",\"algo_刷题笔记4.md\":\"65097491\",\"designpattern_发布订阅模式.md\":\"970ca931\",\"algo_刷题笔记3.md\":\"7fcd0a6a\",\"css_css入门.md\":\"186d1e5c\",\"js_js03.md\":\"c7d70c08\",\"network_01.计网起步.md\":\"362de3b5\",\"js_js04.md\":\"ff91d80d\",\"js_js手写.md\":\"82c34a7c\",\"algo_刷题笔记2.md\":\"37b13e79\",\"algo_刷题笔记1.md\":\"601bbf48\",\"js_js02.md\":\"6346f4ef\",\"algo_01.汇总.md\":\"ddcd8b4a\",\"network_02.http优化.md\":\"ab3954cf\",\"js_js01.md\":\"802b0284\",\"react_quick start.md\":\"2fc9061e\",\"projects_ecosystem.md\":\"1526ac70\",\"projects_wecqu.md\":\"2d501a8b\",\"network_05.网络安全.md\":\"bc141604\",\"network_02.http基础.md\":\"ea049179\",\"network_06.计网快问快答.md\":\"7ac4ec10\",\"network_03.传输层.md\":\"b7412285\",\"network_04.网络层.md\":\"adc07418\",\"network_02.应用层协议种类.md\":\"da532813\",\"ts_quick start.md\":\"0be8b76a\",\"react_框架抽象.md\":\"4578d7b6\",\"react_react 基础学习.md\":\"ddfa0dea\",\"react_react hooks.md\":\"3560e5e9\",\"react_react 事件机制.md\":\"1787ad45\",\"uniapp_uniapp基础.md\":\"613f7ea7\",\"ts_类型系统.md\":\"6c1d1441\",\"ts_函数式编程.md\":\"9add7ee4\",\"ts_面向对象特性.md\":\"428a8416\",\"ts_泛型工具类.md\":\"a3ff378a\",\"vue_vuerouter.md\":\"edd3ed78\",\"wechatminiprogram_01.小程序起步.md\":\"626b77b9\",\"vue_vue进阶.md\":\"04d4207b\",\"react_react router v6.md\":\"760af9af\",\"vue_手写系列.md\":\"809c6705\",\"wechatminiprogram_04.unionid与其近亲.md\":\"f8809690\",\"index.md\":\"f8789e92\",\"wechatminiprogram_05.微信云开发.md\":\"cd24c3a4\",\"sop_config_in_coding.md\":\"065307d5\",\"sop_introduce.md\":\"0a5bc9ff\",\"sop_project.md\":\"8c5fe64f\",\"wechatminiprogram_02.获取用户头像.md\":\"41f4f647\",\"wechatminiprogram_03.变量加锁与请求封装.md\":\"76d6f2a4\",\"前端工程化_起源.md\":\"41c48223\",\"前端工程化_webpack初探.md\":\"a75fcff0\",\"前端工程化_vite 初探.md\":\"dc85089f\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"zh-cn\",\"dir\":\"ltr\",\"title\":\"@luminous/docs\",\"description\":\"基于 vitepress 实现\",\"base\":\"/my-blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"blog\":{\"pagesData\":[{\"route\":\"/Algo/01.汇总\",\"meta\":{\"tag\":[\"DataStructure\"],\"sticky\":100,\"title\":\"常见算法题型 🔥\",\"date\":\"2023-08-20 22:36:08\",\"description\":\"1. 算法的复杂度分析。\\n2. 排序算法，以及他们的区别和优化。\\n3. 数组中的双指针、滑动窗口思想。\\n4. 利用 Map 和 Set 处理查找表问题。\\n5. 链表的各种问题。\\n6. 利用递归和迭代法\",\"cover\":\"\"}},{\"route\":\"/Algo/02.双指针\",\"meta\":{\"tag\":[\"DataStructure\"],\"title\":\"双指针问题\",\"date\":\"2023-08-20 22:36:08\",\"description\":\" 16. 最接近的三数之和\\n先按照升序排序，然后分别从左往右依次选择一个基础点 `i`（`0 <= i <= nums.length - 3`），在基础点的右侧用双指针去不断的找最小的差值。\\n假设基础\",\"cover\":\"\"}},{\"route\":\"/Algo/刷题笔记1\",\"meta\":{\"tag\":[\"DataStructure\"],\"title\":\"刷题笔记1\",\"date\":\"2023-08-20 22:36:08\",\"description\":\" 1 两数之和\\n```js\\n/**\\n * @param {number[]} nums\\n * @param {number} target\\n * @return {number[]}\\n */\\nvar \",\"cover\":\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc4986eb6aa543a0931a1568de9fd07f~tplv-k3u1fbpfcp-watermark.image?\"}},{\"route\":\"/Algo/刷题笔记2\",\"meta\":{\"tag\":[\"DataStructure\"],\"title\":\"刷题笔记2\",\"date\":\"2023-08-20 22:36:08\",\"description\":\" 90 子集 II\\n\\n```js\\n/**\\n * @param {number[]} nums\\n * @return {number[][]}\\n */\\nvar subsetsWithDup = func\",\"cover\":\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/244f2a200bb64daa9af7ca72879d9cdf~tplv-k3u1fbpfcp-watermark.image?\"}},{\"route\":\"/Algo/刷题笔记3\",\"meta\":{\"tag\":[\"DataStructure\"],\"title\":\"刷题笔记3\",\"date\":\"2023-08-20 22:36:08\",\"description\":\" 242 有效的字母异位词\\n\\n```js\\n/**\\n * @param {string} s\\n * @param {string} t\\n * @return {boolean}\\n */\\nvar isAn\",\"cover\":\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2d8ac25a2b54a72bd1a97fc19b47d7d~tplv-k3u1fbpfcp-watermark.image?\"}},{\"route\":\"/Algo/刷题笔记4\",\"meta\":{\"tag\":[\"DataStructure\"],\"title\":\"刷题笔记4\",\"date\":\"2023-08-20 22:36:08\",\"description\":\" 多多的数字组合\\n多多君最近在研究某种数字组合：\\n定义为：每个数字的十进制表示中(0~9)，每个数位各不相同且各个数位之和等于N。\\n满足条件的数字可能很多，找到其中的最小值即可。\\n多多君还有很多研究课\",\"cover\":\"\"}},{\"route\":\"/CSS/CSS入门\",\"meta\":{\"tag\":[\"CSS\"],\"title\":\"CSS 入门\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 选择器\\n~: 同辈选择器\\n+: 相邻同辈选择器，只会选中一个dom元素\\n height冲突问题\\nmax-height和height一起使用时，取小值。min-height和height一起使用时，取\",\"cover\":\"\"}},{\"route\":\"/DesignPattern/发布订阅模式\",\"meta\":{\"tag\":[\"DesignPattern\"],\"publish\":false,\"title\":\"发布订阅模式\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"\\n- 确定发布者（店家）\\n- 给发布者添加一个缓存列表，用于存放回调函数来通知订阅者\\n- 当发布消息时，发布者遍历这个缓存列表，依次触发里面存放的订阅者回调函数\\n下面是一个简单的发布/订阅模式的例子：\",\"cover\":\"\",\"hidden\":true,\"recommend\":false}},{\"route\":\"/JS/JS01\",\"meta\":{\"tag\":[\"JS\"],\"title\":\"JavaScript\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" ES6和ES5的区别\\n- 箭头函数\\n- let, const创建块级作用域,不会像var一样进行变量提升(先使用,后创建)\\n- 模板字符串和字符串拼接的优劣\\n- 类定义与继承\\n  ES6 引入了对类\",\"cover\":\"\"}},{\"route\":\"/JS/JS02\",\"meta\":{\"tag\":[\"JS\"],\"title\":\"JS基础\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 闭包与作用域链\\n- 闭包(闭包函数)的概念：指有权访问另一个函数作用域中的变量的函数，一般情况就是在一个函数中包含另一个函数。\\n- 闭包的实现原理：其实是利用了作用域链的特性，我们都知道作用域链就是\",\"cover\":\"\"}},{\"route\":\"/JS/JS03\",\"meta\":{\"tag\":[\"JS\"],\"title\":\"\",\"date\":\"2023-07-17 21:56:58\",\"cover\":\"\"}},{\"route\":\"/JS/JS04\",\"meta\":{\"tag\":[\"JS\"],\"title\":\"Javascript进阶\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 生成器函数和迭代器\\n生成器函数和迭代器的作用和实现如下：\\n- 生成器函数是ES6中新增的一种函数控制、使用的方案，它可以让我们更加灵活的控制函数什么时候继续执行、暂停执行等。生成器函数使用 func\",\"cover\":\"\"}},{\"route\":\"/JS/JS手写\",\"meta\":{\"tag\":[\"JS\"],\"sticky\":100,\"title\":\"JS手写\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 组合函数\\n简单来说，compose函数可以用来组合不同的函数，它的实现有两个要点\\n1. 组合函数\\n2. 从右→左求值\\n这里我使用reduce和常规递归两种方法实现compose\\n```jsx\\n// \",\"cover\":\"\"}},{\"route\":\"/Network/01.计网起步\",\"meta\":{\"description\":\"快速入门计算机网络\",\"tag\":[\"计算机网络\"],\"date\":\"2023-07-17 21:56:58\",\"title\":\"入门篇\",\"cover\":\"\"}},{\"route\":\"/Network/02.HTTP优化\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"HTTP/1.1如何优化\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"我们可以从下面这三种优化思路来优化 HTTP/1.1 协议：\\n- *尽量避免发送 HTTP 请求*；\\n  - 缓存\\n- *在需要发送 HTTP 请求时，考虑如何减少请求次数*；\\n  - 减少重定向请求\",\"cover\":\"\"}},{\"route\":\"/Network/02.HTTP基础\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"HTTP基础\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" HTTP基本概念\\n HTTP是什么?\\nHTTP是基于TCP协议的应用层传输协议, 由请求和响应构成, 是一个标准的客户端服务器模型\\n\\n`HTTP` 是一种无状态 (stateless) 协议, `H\",\"cover\":\"\"}},{\"route\":\"/Network/02.应用层协议种类\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"应用层-协议种类\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"应用层有许多协议，包括\\n1. 域名系统DNS协议\\n2. FTP文件传输协议\\n3. Telnet远程终端协议\\n4. Telnet远程登录协议\\n5. SMTP电子邮件协议\\n6. POP3邮件读取协议\\n7.\",\"cover\":\"https://img-blog.csdnimg.cn/img_convert/31410d2e885aab55c2c588aad754bb5c.png\"}},{\"route\":\"/Network/03.传输层\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"TCP与UDP\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" TCP和UDP的区别\\nTCP(传输控制协议)和UDP(用户数据报协议)是两种不同的传输层协议, 属于TCP/IP体系分层下的第二层, 是直接服务于应用层的协议\\n\\n 无连接和面向连接\\n 不可靠传输与可\",\"cover\":\"\"}},{\"route\":\"/Network/04.网络层\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"网络层概述\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"更新ing...\",\"cover\":\"\"}},{\"route\":\"/Network/05.网络安全\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"网络安全\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 网络安全概述\\n网络安全分为安全威胁，安全服务和安全机制三方面\\n 安全威胁\\n分为被动攻击和主动攻击\\n- 被动攻击：攻击者通过窃听手段仅观察和分析网络中传输数据流中的敏感信息，\\n  而不对其进行干扰。\\n\",\"cover\":\"\"}},{\"route\":\"/Network/06.计网快问快答\",\"meta\":{\"tag\":[\"计算机网络\"],\"title\":\"\",\"date\":\"2023-07-17 21:56:58\",\"cover\":\"https://pic1.zhimg.com/v2-dc8ac903cd28c9e5b158c1d16677c810_r.jpg\"}},{\"route\":\"/Projects/Wecqu\",\"meta\":{\"tag\":[\"Project\"],\"title\":\"WeCQU微信小程序\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"\\n> 用户画像：在校大学生\\n 项目介绍\\n我们的项目是一个智慧校园一体化查询微信小程序，专为大学生打造，旨在提高学生在校内的信息查询效率。\\n具体的实现方式是利用”微信小程序+后端“的技术，实现了一次登录\",\"cover\":\"\"}},{\"route\":\"/Projects/ecosystem\",\"meta\":{\"tag\":[\"Project\"],\"title\":\"校园生态圈\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"\\n 项目效果\\n1. 首页\\n<img src=\\\"./assets/ecos_homepage.pic.jpg\\\" alt=\\\"image-20230318095543200\\\" style=\\\"zoom:50%\",\"cover\":\"\"}},{\"route\":\"/React/Quick Start\",\"meta\":{\"tag\":[\"React\"],\"title\":\"Quick Start\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"\\n- Component && Props\\n- States\\n- Hooks\\n- Redux\\n- Typescript\\n- Forms\\n- State Management\\n- Firebase Pr\",\"cover\":\"\"}},{\"route\":\"/React/React Hooks\",\"meta\":{\"tag\":[\"React\"],\"title\":\"React Hooks\",\"date\":\"2023-07-30 15:13:42\",\"description\":\" 一、产生原因\\nReact Hooks是React v16.8.0版本引入的新特性，它可以让我们在函数组件中使用state和其他React特性，从而避免使用类组件。\\n在使用React Hooks时，有\",\"cover\":\"\"}},{\"route\":\"/React/React Router v6\",\"meta\":{\"tag\":[\"React\"],\"title\":\"React Router v6\",\"date\":\"2023-07-30 15:13:42\",\"description\":\" 快速复习\\n- BrowerRouter\\n- NavLink vs Link (可以传递参数)\\n- Routes && Route\\n- useNavigate 强制路由跳转\\n- Link && Nav\",\"cover\":\"\"}},{\"route\":\"/React/React 事件机制\",\"meta\":{\"tag\":[\"React\"],\"title\":\"React 事件机制\",\"date\":\"2023-07-30 15:13:42\",\"description\":\" 前置知识\\n- 事件冒泡\\n- 事件委托\\n- 函数式编程「React 官方是十分推崇函数式编程的」\\n    - 纯函数\\n    - 了解什么是副作用\\n    - 不可变状态\\n        - 可以使用\",\"cover\":\"\"}},{\"route\":\"/React/React 基础学习\",\"meta\":{\"tag\":[\"React\"],\"title\":\"React 基础学习\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"\\n> \\n 起步\\n 本质\\n> 在React jsx文件中每一次对组件的使用`<App />`都是在直接调用对应的组件函数\\n> \\n- component state组件状态，实际上直接翻译过来不准确，因此\",\"cover\":\"\"}},{\"route\":\"/React/框架抽象\",\"meta\":{\"tag\":[\"React\"],\"title\":\"框架抽象\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"层级划分（三层）：\\n- 应用层面\\n    - 组件层面\\n        - 节点层面\\n 工作原理\\n\\n> \\n视图 = 框架内部运行机制(状态)\\n框架内部的运行机制根据状态渲染视图\\n 不同框架的区别\\n> \",\"cover\":\"\"}},{\"route\":\"/TS/Quick Start\",\"meta\":{\"tag\":[\"TS\"],\"title\":\"Quick Start\",\"date\":\"2023-07-30 15:13:42\",\"description\":\" TS和JS的区别\\nTS和JS的区别是，TS是JS的一个超集，也就是说，JS有的TS都有，而TS还有一些JS没有的特性。最大的特性就是TS提供了类型系统³⁵，可以在编译时检查代码中的错误和不匹配。而J\",\"cover\":\"\"}},{\"route\":\"/TS/函数式编程\",\"meta\":{\"tag\":[\"TS\"],\"title\":\"\",\"date\":\"2023-07-30 15:13:42\",\"cover\":\"\"}},{\"route\":\"/TS/泛型工具类\",\"meta\":{\"tag\":[\"TS\"],\"title\":\"泛型工具类\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"\\n```typescript\\nimport { IPerson } from \\\"../interfaces/IPerson\\\";\\n// Partial<T>: 将T中所有属性变为可选项\\ntype TPa\",\"cover\":\"\"}},{\"route\":\"/TS/类型系统\",\"meta\":{\"tag\":[\"TS\"],\"title\":\"类型系统\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"1.类型系统\\n核心：never  字面量类型  原始类型  any/unknown （赋值时只能是层级低的赋值给层级高的）\\n如何理解呢？\\n通过人往高处走这句俗语来理解，层级高的赋值给层级低的，就相当于\",\"cover\":\"\"}},{\"route\":\"/TS/面向对象特性\",\"meta\":{\"tag\":[\"TS\"],\"title\":\"面向对象\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"在 TypeScript 中，面向对象编程有三大特性：封装、继承和多态。\\n 封装\\n封装是指将数据和方法相结合，形成一个有机的整体，同时隐藏了对象的内部细节，只向外部暴露必要的接口。这样可以保护对象的数\",\"cover\":\"\"}},{\"route\":\"/Uniapp/Uniapp基础\",\"meta\":{\"tag\":[\"Uniapp\"],\"title\":\"uniapp基础\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 生命周期\\n 应用生命周期\\n在`App.vue`文件中使用, 主要包括onLaunch, onShow和onHide\\n- `onLaunch` - 初始化完成时出发, 全局仅一次\\n- `onShow \",\"cover\":\"\"}},{\"route\":\"/Vue/VueRouter\",\"meta\":{\"tag\":[\"Vue3\"],\"title\":\"\",\"date\":\"2023-07-17 21:56:58\",\"cover\":\"\"}},{\"route\":\"/Vue/Vue进阶\",\"meta\":{\"tag\":[\"Vue3\"],\"title\":\"\",\"date\":\"2023-07-17 21:56:58\",\"cover\":\"\"}},{\"route\":\"/Vue/手写系列\",\"meta\":{\"tag\":[\"Vue3\"],\"title\":\"手写\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 手写响应式原理\\n defineProperty\\n```jsx\\nlet person = {\\n  name: '',\\n  age: 18\\n}\\nfunction defineProperty(obj, \",\"cover\":\"\"}},{\"route\":\"/WeChatMiniprogram/01.小程序起步\",\"meta\":{\"tag\":[\"微信小程序\"],\"title\":\"小程序入门\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 缘起\\n我于2022年8月份开始负责一款校园课表查询小程序的线上维护。在这个过程中，我不仅进行了新功能的开发和旧功能的维护，还遇到并解决了许多bug。为了分享我的经验和心得，我将这些问题和总结整理成了\",\"cover\":\"\"}},{\"route\":\"/WeChatMiniprogram/02.获取用户头像\",\"meta\":{\"tag\":[\"微信小程序\"],\"sticky\":100,\"title\":\"案例一: 头像获取\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"首先我们看一下微信官方对头像获取做出的改动日志：\\n\\n> wx.getUserInfo 在2021年4月28日停用  \\n> wx.getUserProfile 在2022年11月8日停用\\n 1. 起因\\n\",\"cover\":\"\"}},{\"route\":\"/WeChatMiniprogram/03.变量加锁与请求封装\",\"meta\":{\"tag\":[\"微信小程序\"],\"title\":\"实际案例\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 按钮点击事件\\n就常见的登录流程来说, 心急的用户在输入账号和密码后会连续点击按钮事件, 从而会向后端发送多次登录请求, 影响了服务器资源, 为了解决这一问题有两种实现方式:\\n 方法一: wx.sho\",\"cover\":\"\"}},{\"route\":\"/WeChatMiniprogram/04.Unionid与其近亲\",\"meta\":{\"tag\":[\"微信小程序\"],\"title\":\"AppId,UnionId和OpenId\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"以一首诗作为开篇\\n\\n>开放平台，公众平台，小程序，\\n>各有特色，各有用途。\\n>\\n>AppID 是应用的身份标识，\\n>UnionID 是用户的唯一标识，\\n>OpenID 是用户在应用中的标识，\\n>三者之\",\"cover\":\"\"}},{\"route\":\"/WeChatMiniprogram/05.微信云开发\",\"meta\":{\"tag\":[\"微信小程序\"],\"title\":\"微信云开发\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 获取一个集合所有记录\\n开发者可以通过 `limit` 方法指定需要获取的记录数量，但小程序端不能超过 20 条，云函数端不能超过 100 条。\\n下面是在云函数端获取一个集合所有记录的例子，因为有最多\",\"cover\":\"\"}},{\"route\":\"/sop/config_in_coding\",\"meta\":{\"tag\":[\"SOP\"],\"title\":\"\",\"date\":\"2023-07-17 21:56:58\",\"cover\":\"\"}},{\"route\":\"/sop/introduce\",\"meta\":{\"tag\":[\"SOP\"],\"title\":\"关于我\",\"date\":\"2023-07-17 21:56:58\",\"description\":\" 介绍\\n欢迎来到我的个人博客！我是嘉诚，一名热爱生活的前端开发工程师。\\n在这里，我会和大家分享我的学习心得和实践经验，涉及数据结构、计算机网络、JavaScript、Vue.js、微信小程序等多方面的\",\"cover\":\"\"}},{\"route\":\"/sop/project\",\"meta\":{\"tag\":[\"SOP\"],\"sticky\":100,\"title\":\"项目汇总\",\"date\":\"2023-07-17 21:56:58\",\"description\":\"\\r\\n 仿掘金官网\\r\\n\\r\\n- Vue.js: 渐进式Javascript框架\\r\\n- Apifox: 充当后端, 提供mock数据\\r\\n\\r\\n Wecqu微信小程序\\r\\n\\r\\n- 原生微信小程序\\r\\n- Color\",\"cover\":\"\"}},{\"route\":\"/前端工程化/Vite 初探\",\"meta\":{\"tag\":[\"前端工程化\"],\"title\":\"前置\",\"date\":\"2023-07-30 15:13:42\",\"description\":\" 什么是构建工具\\n早期的开发者们，使用 HTML，CSS，JS 来进行网页的开发，当网站体量大了之后，这种传统的方式却带来了难以维护，样式不统一等等问题，由此产生了像 React，Vue 这样的 Fr\",\"cover\":\"\"}},{\"route\":\"/前端工程化/Webpack初探\",\"meta\":{\"tag\":[\"前端工程化\"],\"title\":\"Webpack 初探\",\"date\":\"2023-07-30 15:13:42\",\"description\":\" 核心概念\\n Entry：入口\\nEntry 指示 webpack 应该使用哪个模块，来作为构建其内部 依赖图(dependency graph) 的开始\\n`/** @type {import('web\",\"cover\":\"\"}},{\"route\":\"/前端工程化/起源\",\"meta\":{\"tag\":[\"前端工程化\"],\"title\":\"起源\",\"date\":\"2023-07-30 15:13:42\",\"description\":\"早期的开发者们，使用 HTML，CSS，JS 来进行网页的开发，当网站体量大了之后，这种传统的方式却带来了难以维护，样式不统一等等问题，由此产生了像 React，Vue 这样的 Framework，协\",\"cover\":\"\"}}],\"author\":\"Luminous\",\"friend\":[{\"nickname\":\"Vitepress\",\"des\":\"Vite & Vue Powered Static Site Generator\",\"avatar\":\"https://img.cdn.sugarat.top/mdImg/MTY3NDk5NTI2NzY1Ng==674995267656\",\"url\":\"https://vitepress.vuejs.org/\"}],\"recommend\":{\"showSelf\":true},\"search\":\"pagefind\",\"mermaid\":false},\"sidebar\":[{\"text\":\"\",\"items\":[]}],\"lastUpdatedText\":\"上次更新于\",\"footer\":{\"message\":\"每天前进 30 公里\",\"copyright\":\"MIT Licensed | <a target=\\\"_blank\\\" href=\\\"https://github.com/jiacheng-coder/my-blog\\\"> @luminous/docs </a>\"},\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"关于我\",\"link\":\"/sop/introduce.html\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/jiacheng-coder\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>